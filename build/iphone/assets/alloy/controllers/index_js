function __processArg(t,e){var i=null;return t&&(i=t[e]||null,delete t[e]),i}function Controller(){function t(){var t=new Date,e="A",i=t.getHours(),r=t.getMinutes(),n=t.getSeconds();return 10>r&&(r="0"+r),i>12?(i-=12,e="P"):0===i&&(i=12),{fullString:i+""+r+e,string:i+""+r,milString:t.getHours()+""+r,hours:i,minutes:r,seconds:n,meridian:e}}function e(e){var i=setInterval(function(){var n=t(),s=e.hours-n.hours,o=e.minutes-n.minutes-1,l=60-n.seconds;n.hours<e.hours&&n.minutes>e.minutes&&(s--,o+=60),10>l&&(l="0"+l),10>o&&(o="0"+o),a.nextHours.setText(s),a.nextMinutes.setText(o),a.nextSeconds.setText(l),n.milString>e.milString&&(clearInterval(i),i=null,r())},1e3)}function r(){var r,n,s=h.departures,o=t();for(a.currentTimeString.setText(o.fullString),n=s[s.length-1],i=0;i<s.length&&(r=n,n={fullString:s[i],string:s[i].substr(0,s[i].length-1),milString:s[i].substr(0,s[i].length-1),meridian:s[i].substr(s[i].length-1),hours:s[i].substr(0,s[i].length-3),minutes:s[i].substr(s[i].length-3,2)},"P"===n.meridian&&(n.milString=parseInt(n.milString)+1200),!(parseInt(o.string)<parseInt(n.string)));i++);e(n),a.nextTimeString.setText(n.fullString),a.lastTimeString.setText(r.fullString)}function n(){Titanium.Geolocation.accuracy=Titanium.Geolocation.ACCURACY_BEST,Titanium.Geolocation.distanceFilter=10,Titanium.Geolocation.getCurrentPosition(function(t){if(t.error)return void alert("HFL cannot get your current location");var e=t.coords.longitude,i=t.coords.latitude;a.latitude.setText("Lat:  "+i),a.longitude.setText("Long: "+e)}),a.stationName.setText(h.name),r()}function s(){h=u[0]}function o(){a.index.open(),closestStation=s(),n(closestStation)}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="index",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var a=this,l={};a.__views.index=Ti.UI.createWindow({backgroundColor:"white",id:"index"}),a.__views.index&&a.addTopLevelView(a.__views.index),a.__views.stationName=Ti.UI.createLabel({top:40,id:"stationName"}),a.__views.index.add(a.__views.stationName),a.__views.currentString=Ti.UI.createLabel({top:80,left:0,text:"Current:",id:"currentString"}),a.__views.index.add(a.__views.currentString),a.__views.currentTimeString=Ti.UI.createLabel({top:80,left:80,id:"currentTimeString"}),a.__views.index.add(a.__views.currentTimeString),a.__views.nextString=Ti.UI.createLabel({top:120,left:0,text:"Next:",id:"nextString"}),a.__views.index.add(a.__views.nextString),a.__views.nextTimeString=Ti.UI.createLabel({top:120,left:80,id:"nextTimeString"}),a.__views.index.add(a.__views.nextTimeString),a.__views.nextHours=Ti.UI.createLabel({top:120,left:200,width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"#000",id:"nextHours"}),a.__views.index.add(a.__views.nextHours),a.__views.nextHMColon=Ti.UI.createLabel({top:120,left:230,width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"#000",text:":",id:"nextHMColon"}),a.__views.index.add(a.__views.nextHMColon),a.__views.nextMinutes=Ti.UI.createLabel({top:120,left:240,width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"#000",id:"nextMinutes"}),a.__views.index.add(a.__views.nextMinutes),a.__views.nextMSColon=Ti.UI.createLabel({top:120,left:270,width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"#000",text:":",id:"nextMSColon"}),a.__views.index.add(a.__views.nextMSColon),a.__views.nextSeconds=Ti.UI.createLabel({top:120,left:280,width:Ti.UI.SIZE,height:Ti.UI.SIZE,color:"#000",id:"nextSeconds"}),a.__views.index.add(a.__views.nextSeconds),a.__views.lastString=Ti.UI.createLabel({top:160,left:0,text:"Last:",id:"lastString"}),a.__views.index.add(a.__views.lastString),a.__views.lastTimeString=Ti.UI.createLabel({top:160,left:80,id:"lastTimeString"}),a.__views.index.add(a.__views.lastTimeString),a.__views.refresh=Ti.UI.createButton({bottom:80,title:"Refresh",id:"refresh"}),a.__views.index.add(a.__views.refresh),a.__views.latitude=Ti.UI.createLabel({left:10,bottom:40,id:"latitude"}),a.__views.index.add(a.__views.latitude),a.__views.longitude=Ti.UI.createLabel({left:10,bottom:20,id:"longitude"}),a.__views.index.add(a.__views.longitude),l.destroy=function(){},_.extend(a,a.__views);var h,u=[{name:"US 36 & McCaslin Park-n-Ride",departures:["545A","609A","622A","637A","701A","713A","723A","733A","743A","756A","812A","822A","824A","837A","847A","857A","907A","922A","938A","946A"]}];a.refresh.addEventListener("click",n),o(),_.extend(a,l)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;